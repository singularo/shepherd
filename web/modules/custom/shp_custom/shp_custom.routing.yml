shp_custom.sites:
  path: '/websites'
  requirements:
    _permission: 'shp access environment wizard'
shp_custom.environments:
  path: '/environments'
  requirements:
    _permission: 'shp access environment wizard'
shp_custom.users:
  path: '/users'
  requirements:
    _permission: 'shp access environment wizard'
shp_custom.distributions:
  path: '/distributions'
  requirements:
    _permission: 'shp access environment wizard'
shp_custom.environment-clone-form:
  path: '/site/{site}/environment/clone/{environment}'
  defaults:
    _form: '\Drupal\shp_custom\Form\EnvironmentCloneForm'
    _title_callback: '\Drupal\shp_custom\Form\EnvironmentCloneForm::getPageTitle'
    _title: 'Clone environment'
  options:
    _auth: [ 'basic_auth', 'cookie' ]
    parameters:
      site:
        type: entity:node
      environment:
        type: entity:node
    no_cache: TRUE
  requirements:
    _permission: 'shp access environment wizard'
    site: ^[0-9]+
    environment: ^[0-9]+
shp_custom.environment-backup-form:
  path: '/site/{site}/environment/backup/{environment}'
  defaults:
    _form: '\Drupal\shp_custom\Form\EnvironmentBackupForm'
    _title_callback: '\Drupal\shp_custom\Form\EnvironmentBackupForm::getPageTitle'
    _title: 'Backup environment'
  options:
    _auth: [ 'basic_auth', 'cookie' ]
    parameters:
      site:
        type: entity:node
      environment:
        type: entity:node
    no_cache: TRUE
  requirements:
    _permission: 'shp access environment wizard'
    site: ^[0-9]+
    environment: ^[0-9]+
shp_custom.environment-restore-form:
  path: '/site/{site}/environment/restore/{environment}'
  defaults:
    _form: '\Drupal\shp_custom\Form\EnvironmentRestoreForm'
    _title_callback: '\Drupal\shp_custom\Form\EnvironmentRestoreForm::getPageTitle'
    _title: 'Restore backup'
  options:
    _auth: [ 'basic_auth', 'cookie' ]
    parameters:
      site:
        type: entity:node
      environment:
        type: entity:node
    no_cache: TRUE
  requirements:
    _permission: 'shp access environment wizard'
    site: ^[0-9]+
    environment: ^[0-9]+
shp_custom.settings:
  path: '/admin/config/system/shepherd'
  defaults:
    _form: '\Drupal\shp_custom\Form\ShepherdSettings'
    _title: 'Shepherd settings'
  requirements:
    _permission: 'administer account settings'
shp_custom.site-backups-list:
  path: '/site/{node}/backups'
  defaults:
    _controller: '\Drupal\shp_custom\Controller\SiteBackupListController::index'
    _title: 'Backups'
    _title_callback: '\Drupal\shp_custom\Controller\SiteBackupListController::getPageTitle'
  options:
    parameters:
      node:
        type: entity:node
    no_cache: TRUE
  requirements:
    _permission: 'administer account settings'
    _custom_access: '\Drupal\shp_custom\Controller\SiteLocalTaskController::checkAccess'
shp_custom.api-site-environments:
  path: '/api/site/{node}/environments'
  defaults:
    _controller: '\Drupal\shp_custom\Controller\SiteEnvironmentsController::getStatus'
  methods: [GET]
  requirements:
    _permission: 'shp access environment'

